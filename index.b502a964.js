!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=n.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){a[e]=n},n.parcelRequired7c6=r);var o=r("bpxeT"),s=r("2TvXO"),i={form:document.querySelector(".search-form"),moviesContainer:document.querySelector(".data-container"),moviesList:document.querySelector(".movies-list"),targetObserverMovies:document.querySelector(".js-guard-movies"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-movies"),closeBtn:document.querySelector(".modal-close-btn")},c=r("dIxxU"),l={BASE_MOVIES_URL:"https://api.themoviedb.org/3/trending/movie/week",BASE_SERIES_URL:"https://api.themoviedb.org/3/trending/tv/week",BASE_PEOPLE_URL:"https://api.themoviedb.org/3/trending/person/week",SEARCH_MOVIE_URL:"https://api.themoviedb.org/3/search/movie",SEARCH_SERIES_URL:"https://api.themoviedb.org/3/search/tv",SINGLE_MOVIE_URL:"https://api.themoviedb.org/3/movie",SINGLE_SERIES_URL:"https://api.themoviedb.org/3/tv",SEARCH_PERSON_URL:"https://api.themoviedb.org/3/search/person",SINGLE_PERSON_URL:"https://api.themoviedb.org/3/person"},d=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function p(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,a=e.original_title,r=e.overview,o=e.vote_average,s=e.poster_path,i=function(e){return e.map((function(e){var n=d.find((function(n){return n.id===e}));return n?n.name:""})).filter(Boolean).join(", ")}(t);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat("https://image.tmdb.org/t/p/w500").concat(s,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(a,'</h2>\n            <p class="movie-description">').concat(r,'</p>\n            <p class="movie-genres">Genres: ').concat(i||"Sorry, no genres available",'</p>\n            <span class="movie-rate">Rating: ').concat(o.toFixed(2),"</span> \n          </div>\n     \n          </li>")})).join("");i.moviesList.insertAdjacentHTML("beforeend",n)}function u(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,a=e.original_title,r=e.overview,o=e.release_date,s=e.vote_average,i=e.vote_count,c=e.poster_path,l=function(e){return e.map((function(e){var n=d.find((function(n){return n.id===e}));return n?n.name:""})).filter(Boolean).join(", ")}(t);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat("https://image.tmdb.org/t/p/w500").concat(c,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(a,'</h2>\n            <p class="movie-description">').concat(r,'</p>\n              <p class="movie-genres">Genres: ').concat(l||"Sorry, no genres available",'</p>\n                <p class="movie-genres">Release date: ').concat(o,'</p>\n            <span class="movie-rate">Rating: ').concat(s.toFixed(2),'</span> \n                 <span class="movie-rate-count">Total votes: ').concat(i,"</span> \n          </div>     \n          </li>")})).join("");i.moviesList.insertAdjacentHTML("beforeend",n)}o=r("bpxeT"),s=r("2TvXO"),c=r("dIxxU");function v(e,n,t,a){return m.apply(this,arguments)}function m(){return(m=e(o)(e(s).mark((function n(t,a,r,o){var i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get("".concat(a,"?api_key=").concat(t,"&query=").concat(r,"&page=").concat(o));case 3:return i=e.sent,e.abrupt("return",i);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 10:case"end":return e.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}o=r("bpxeT"),s=r("2TvXO"),c=r("dIxxU");function f(e,n,t){return g.apply(this,arguments)}function g(){return(g=e(o)(e(s).mark((function n(t,a,r){var o,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!0,e.next=4,c.default.get("".concat(a,"/").concat(r,"?api_key=").concat(t));case 4:return o=e.sent,console.log(o),i=o.data,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error fetching a movie:",e.t0.message);case 13:return e.prev=13,!1,e.finish(13);case 16:case"end":return e.stop()}}),n,null,[[0,10,13,16]])})))).apply(this,arguments)}o=r("bpxeT"),s=r("2TvXO");var h="https://image.tmdb.org/t/p/w500";function b(e){return _.apply(this,arguments)}function _(){return(_=e(o)(e(s).mark((function n(t){var a,r,o,c,l,d,p,u,v,m,f,g,b,_,S,R,w;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.id,r=t.budget,o=t.genres,c=t.origin_country,l=t.title,d=t.original_title,p=t.release_date,u=t.revenue,v=t.runtime,m=t.spoken_languages,f=t.vote_average,g=t.vote_count,b=t.overview,_=t.poster_path,S=o.map((function(e){return e.name})).join(", "),R=m.map((function(e){return e.english_name})).join(", "),w='<div class="movie-item-detailed" id='.concat(a,'>\n        <img src="').concat(h).concat(_,'" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">').concat(l,'</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ').concat(d,'</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ').concat(S,'</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ').concat(c,'</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ').concat(p,'</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ').concat(b,'</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ').concat(R,'</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $').concat((r/1e6).toFixed(),' mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $').concat((u/1e6).toFixed(),' mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ').concat(v,' minutes</p>\n        <span class="rating"><span class="modal-bold">Rating:</span> ').concat(f,'</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ').concat(g,"</span>\n      </div>"),i.backdrop.classList.remove("is-hidden"),i.modalWrapper.innerHTML=w,i.backdrop.addEventListener("click",L),window.addEventListener("keydown",y),i.closeBtn.addEventListener("click",E);case 9:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function E(){i.modalWrapper.innerHTML="",i.backdrop.classList.add("is-hidden"),i.backdrop.removeEventListener("click",E),i.closeBtn.removeEventListener("click",E),window.removeEventListener("keydown",y)}function y(e){"Escape"===e.code&&E()}function L(e){e.currentTarget===e.target&&E()}var S=r("lG111"),R="86bcaf318e232372b2e8e2623c959f88",w="",x=1,k=1;function O(e,n,t){return I.apply(this,arguments)}function I(){return(I=e(o)(e(s).mark((function n(t,a,r){var o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,isLoading=!0,e.next=4,c.default.get("".concat(a,"?api_key=").concat(t,"&page=").concat(r));case 4:return(o=e.sent).data.total_pages===k&&((0,S.notifyEndResults)(),M.unobserve(i.targetObserverMovies)),l=o.data.results,e.abrupt("return",l);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 13:return e.prev=13,isLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),n,null,[[0,10,13,16]])})))).apply(this,arguments)}var M=new IntersectionObserver((function(e,n){console.log(e),e.forEach((function(e){e.isIntersecting&&O(R,l.BASE_MOVIES_URL,x+=1).then((function(e){return p(e)}))}))}),{root:null,rootMargin:"400px",threshold:1});function T(){return(T=e(o)(e(s).mark((function n(t){var a,r,o,c;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),M.unobserve(i.targetObserverMovies),U.unobserve(i.targetObserverSearch),i.backdrop.classList.add("is-hidden"),w=i.form.searchQuery.value.trim(),k=1,e.prev=6,i.moviesList.innerHTML="",i.endResultsInfo.classList.add("visually-hidden"),e.next=11,v(R,l.SEARCH_MOVIE_URL,w,k);case 11:a=e.sent,r=a.data,o=r.results,c=r.total_results,o&&o.length>0?(u(o),U.observe(i.targetObserverSearch)):(i.endResultsInfo.classList.remove("visually-hidden"),(0,S.notifyNoResults)()),c&&c<=20&&a.data.total_pages===k&&((0,S.notifyEndResults)(),U.unobserve(i.targetObserverSearch)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),console.log("Error fetching movies:",e.t0.message);case 20:return e.prev=20,i.form.searchQuery.value="",e.finish(20);case 23:case"end":return e.stop()}}),n,null,[[6,17,20,23]])})))).apply(this,arguments)}O(R,l.BASE_MOVIES_URL,x).then((function(e){return p(e)})).then((function(){return M.observe(i.targetObserverMovies)})).catch((function(e){return console.log(e)})),i.form.addEventListener("submit",(function(e){return T.apply(this,arguments)}));var U=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&v(R,l.SEARCH_MOVIE_URL,w,k+=1).then((function(e){u(e.data.results)}))}))}),{root:null,rootMargin:"400px",threshold:1});function A(){return(A=e(o)(e(s).mark((function n(t){var a,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a=t.target.closest(".movies-item"))){e.next=8;break}return r=a.getAttribute("data-id"),e.next=6,f(R,l.SINGLE_MOVIE_URL,r);case 6:b(e.sent);case 8:case"end":return e.stop()}}),n)})))).apply(this,arguments)}i.moviesContainer.addEventListener("click",(function(e){return A.apply(this,arguments)}))}();
//# sourceMappingURL=index.b502a964.js.map
