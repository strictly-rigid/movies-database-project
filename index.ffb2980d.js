!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){r[e]=n},n.parcelRequired7c6=a);var s=a("bpxeT"),o=a("2TvXO"),c={form:document.querySelector(".search-form"),dataContainer:document.querySelector(".data-container"),list:document.querySelector(".movies-list"),targetObserver:document.querySelector(".js-guard-movies"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-movies"),closeBtn:document.querySelector(".modal-close-btn")},i=a("4s6iC");i=a("4s6iC");function l(e,n){return e.map((function(e){var t=n.find((function(n){return n.id===e}));return t?t.name:""})).filter(Boolean).join(", ")}function u(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,r=e.original_title,a=e.overview,s=e.vote_average,o=e.poster_path,c=l(t,i.genres);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat(i.URLS.POSTER_URL).concat(o,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(r,'</h2>\n            <p class="movie-description">').concat(a,'</p>\n            <p class="movie-genres">Genres: ').concat(c||"Sorry, no genres available",'</p>\n            <span class="movie-rate">Rating: ').concat(s.toFixed(2),"</span> \n          </div>\n     \n          </li>")})).join("");c.list.insertAdjacentHTML("beforeend",n)}i=a("4s6iC");function p(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,r=e.original_title,a=e.overview,s=e.release_date,o=e.vote_average,c=e.vote_count,u=e.poster_path,p=l(t,i.genres);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat(i.URLS.POSTER_URL).concat(u,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(r,'</h2>\n            <p class="movie-description">').concat(a,'</p>\n              <p class="movie-genres">Genres: ').concat(p||"Sorry, no genres available",'</p>\n                <p class="movie-genres">Release date: ').concat(s,'</p>\n            <span class="movie-rate">Rating: ').concat(o.toFixed(2),'</span> \n                 <span class="movie-rate-count">Total votes: ').concat(c,"</span> \n          </div>     \n          </li>")})).join("");c.list.insertAdjacentHTML("beforeend",n)}s=a("bpxeT"),o=a("2TvXO");var d=a("dIxxU");function v(e,n,t,r){return m.apply(this,arguments)}function m(){return(m=e(s)(e(o).mark((function n(t,r,a,s){var c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.default.get("".concat(r,"?api_key=").concat(t,"&query=").concat(a,"&page=").concat(s));case 3:return c=e.sent,e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 10:case"end":return e.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}s=a("bpxeT"),o=a("2TvXO"),d=a("dIxxU");function f(e,n,t){return g.apply(this,arguments)}function g(){return(g=e(s)(e(o).mark((function n(t,r,a){var s,c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.default.get("".concat(r,"/").concat(a,"?api_key=").concat(t));case 3:return s=e.sent,c=s.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("Error fetching a movie:",e.t0.message);case 11:case"end":return e.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}s=a("bpxeT"),o=a("2TvXO"),i=a("4s6iC");var h,b=a("gOfal"),y=a("lG111"),_=null!==(h=JSON.parse(localStorage.getItem("favorite_movies")))&&void 0!==h?h:[];function S(e){return L.apply(this,arguments)}function L(){return(L=e(s)(e(o).mark((function n(t){var r,a,s,l,u,p,d,v,m,f,g,h,y,_,S,L,E;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.id,a=t.budget,s=t.genres,l=t.origin_country,u=t.title,p=t.original_title,d=t.release_date,v=t.revenue,m=t.runtime,f=t.spoken_languages,g=t.vote_average,h=t.vote_count,y=t.overview,_=t.poster_path,S=s.map((function(e){return e.name})).join(", "),L=f.map((function(e){return e.english_name})).join(", "),E='<div class="movie-item-detailed" id='.concat(r,'>\n        <img src="').concat(i.URLS.POSTER_URL).concat(_,'" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">').concat(u,'</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ').concat(p,'</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ').concat(S,'</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ').concat(l,'</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ').concat(d,'</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ').concat(y,'</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ').concat(L,'</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $').concat((a/1e6).toFixed(),' mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $').concat((v/1e6).toFixed(),' mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ').concat(m,' minutes</p>\n\n         <div class="movies-modal-rate">\n        <span class="rating"><span class="modal-bold">Rating:</span> ').concat(g,'</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ').concat(h,'</span>\n        </div>\n\n        <button type="button" class="movies-fav">Add to favorites</button>\n      </div>'),c.backdrop.classList.remove("is-hidden"),c.modalWrapper.innerHTML=E,c.backdrop.addEventListener("click",(function(e){return(0,b.onBackdropClick)(e,w)})),window.addEventListener("keydown",(function(e){return(0,b.onEscKeyPress)(e,w)})),c.closeBtn.addEventListener("click",w),document.querySelector(".movies-fav").addEventListener("click",(function(){return R(t)}));case 11:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function w(){c.modalWrapper.innerHTML="",c.backdrop.classList.add("is-hidden"),c.backdrop.removeEventListener("click",w),c.closeBtn.removeEventListener("click",w),window.removeEventListener("keydown",b.onEscKeyPress)}function R(e){var n=_.some((function(n){return n.id===e.id})),t={id:e.id,title:e.title,origTitle:e.original_title,budget:e.budget,languages:e.spoken_languages,genres:e.genres,originCountry:e.origin_country,releaseDate:e.release_date,posterPath:e.poster_path,revenue:e.revenue,runtime:e.runtime,overview:e.overview,voteAverage:e.vote_average,voteCount:e.vote_count};n?(0,y.notifyIsInFavorites)(e.title):(_.push(t),localStorage.setItem("favorite_movies",JSON.stringify(_)),(0,y.notifyAddSuccess)(e.title))}y=a("lG111");var E=a("ghquj"),O=a("7t6Gw"),k="86bcaf318e232372b2e8e2623c959f88",x="",T=1,U=1;function I(e){return q.apply(this,arguments)}function q(){return(q=e(s)(e(o).mark((function n(t){var r,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.fetchData)(i.URLS.BASE_MOVIES_URL,{api_key:k,page:t});case 3:return(r=e.sent).total_pages===U&&((0,y.notifyEndResults)(),C.unobserve(c.targetObserver)),a=r.results,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 12:case"end":return e.stop()}}),n,null,[[0,9]])})))).apply(this,arguments)}var C=(0,O.setNewObserver)((function(e){e.forEach((function(e){e.isIntersecting&&I(T+=1).then((function(e){return u(e)}))}))}),i.trendingObserverOptions);function M(){return(M=e(s)(e(o).mark((function n(t){var r,a,s,l;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c.backdrop.classList.add("is-hidden"),x=c.form.searchQuery.value.trim(),j(),e.prev=4,e.next=7,v(k,i.URLS.SEARCH_MOVIE_URL,x,U);case 7:r=e.sent,a=r.data,s=a.results,l=a.total_results,s&&s.length>0?(p(s),A.observe(c.targetObserverSearch)):(c.endResultsInfo.classList.remove("visually-hidden"),(0,y.notifyNoResults)()),l&&l<=20&&r.data.total_pages===U&&((0,y.notifyEndResults)(),A.unobserve(c.targetObserverSearch)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("Error fetching movies:",e.t0.message);case 16:return e.prev=16,c.form.searchQuery.value="",e.finish(16);case 19:case"end":return e.stop()}}),n,null,[[4,13,16,19]])})))).apply(this,arguments)}function j(){C.unobserve(c.targetObserver),A.unobserve(c.targetObserverSearch),c.list.innerHTML="",c.endResultsInfo.classList.add("visually-hidden"),U=1}I(T).then((function(e){return u(e)})).then((function(){return C.observe(c.targetObserver)})).catch((function(e){return console.log(e)})),c.form.addEventListener("submit",(function(e){return M.apply(this,arguments)}));var A=(0,O.setNewObserver)((function(e){e.forEach((function(e){e.isIntersecting&&(U+=1,v(k,i.URLS.SEARCH_MOVIE_URL,x,U).then((function(e){p(e.data.results)})))}))}),i.searchObserverOptions);function N(){return(N=e(s)(e(o).mark((function n(t){var r,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(r=t.target.closest(".movies-item"))){e.next=8;break}return a=r.getAttribute("data-id"),e.next=6,f(k,i.URLS.SINGLE_MOVIE_URL,a);case 6:S(e.sent);case 8:case"end":return e.stop()}}),n)})))).apply(this,arguments)}c.dataContainer.addEventListener("click",(function(e){return N.apply(this,arguments)}))}();
//# sourceMappingURL=index.ffb2980d.js.map
