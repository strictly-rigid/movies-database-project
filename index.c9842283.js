!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=n.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){a[e]=n},n.parcelRequired7c6=o);var r={form:document.querySelector(".search-form"),moviesContainer:document.querySelector(".data-container"),moviesList:document.querySelector(".movies-list"),targetObserver:document.querySelector(".js-guard"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),closeBtn:document.querySelector(".modal-close-btn")};o("lhMFn"),o("e9iRm"),o("4s6iC");var s=o("bpxeT"),i=o("2TvXO"),c=o("dIxxU"),l=o("4s6iC");function p(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,a=e.original_title,o=e.overview,r=e.vote_average,s=e.poster_path,i=function(e){return e.map((function(e){var n=l.genres.find((function(n){return n.id===e}));return n?n.name:""})).filter(Boolean).join(", ")}(t);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat("https://image.tmdb.org/t/p/w500").concat(s,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(a,'</h2>\n            <p class="movie-description">').concat(o,'</p>\n            <p class="movie-genres">Genres: ').concat(i||"Sorry, no genres available",'</p>\n            <span class="movie-rate">Rating: ').concat(r.toFixed(2),"</span> \n          </div>\n     \n          </li>")})).join("");r.moviesList.insertAdjacentHTML("beforeend",n)}s=o("bpxeT"),i=o("2TvXO"),c=o("dIxxU"),l=o("4s6iC"),s=o("bpxeT"),i=o("2TvXO");var u="https://image.tmdb.org/t/p/w500";function d(e){return v.apply(this,arguments)}function v(){return(v=e(s)(e(i).mark((function n(t){var a,o,s,c,l,p,d,v,m,g,h,b,y,w,x,_,k;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.id,o=t.budget,s=t.genres,c=t.origin_country,l=t.title,p=t.original_title,d=t.release_date,v=t.revenue,m=t.runtime,g=t.spoken_languages,h=t.vote_average,b=t.vote_count,y=t.overview,w=t.poster_path,x=s.map((function(e){return e.name})).join(", "),_=g.map((function(e){return e.english_name})).join(", "),k='<div class="movie-item-detailed" id='.concat(a,'>\n        <img src="').concat(u).concat(w,'" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">').concat(l,'</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ').concat(p,'</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ').concat(x,'</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ').concat(c,'</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ').concat(d,'</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ').concat(y,'</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ').concat(_,'</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $').concat((o/1e6).toFixed(),' mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $').concat((v/1e6).toFixed(),' mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ').concat(m,' minutes</p>\n        <span class="rating"><span class="modal-bold">Rating:</span> ').concat(h,'</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ').concat(b,"</span>\n      </div>"),r.backdrop.classList.remove("is-hidden"),r.modalWrapper.innerHTML=k,window.addEventListener("keydown",f);case 7:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function m(){r.modalWrapper.innerHTML="",r.backdrop.classList.toggle("is-hidden"),window.removeEventListener("keydown",f)}function f(e){"Escape"===e.code&&m()}(null==r?void 0:r.closeBtn)&&r.closeBtn.addEventListener("click",m);var g="86bcaf318e232372b2e8e2623c959f88";function h(e,n,t){return b.apply(this,arguments)}function b(){return(b=e(s)(e(i).mark((function n(t,a,o){var r,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,isLoading=!0,e.next=4,c.default.get("".concat(a,"/").concat(o,"?api_key=").concat(t));case 4:return r=e.sent,console.log(r),s=r.data,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error fetching a movie:",e.t0.message);case 13:return e.prev=13,isLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),n,null,[[0,10,13,16]])})))).apply(this,arguments)}function y(){return(y=e(s)(e(i).mark((function n(t){var a,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a=t.target.closest(".movies-item"))){e.next=9;break}return o=a.getAttribute("data-id"),e.next=6,h(g,l.URLS.SINGLE_MOVIE_URL,o);case 6:d(e.sent),r.backdrop.addEventListener("click",w);case 9:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function w(e){e.currentTarget===e.target&&(r.modalWrapper.innerHTML="",r.backdrop.classList.toggle("is-hidden"),window.removeEventListener("keydown",onEscKeyPress))}(null==r?void 0:r.moviesContainer)&&r.moviesContainer.addEventListener("click",(function(e){return y.apply(this,arguments)}));var x="86bcaf318e232372b2e8e2623c959f88",_="https://api.themoviedb.org/3/trending/movie/week",k=1;function L(e,n,t){return T.apply(this,arguments)}function T(){return(T=e(s)(e(i).mark((function n(t,a,o){var r,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!0,e.next=4,c.default.get("".concat(a,"?api_key=").concat(t,"&page=").concat(o));case 4:return r=e.sent,s=r.data.results,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 12:return e.prev=12,!1,e.finish(12);case 15:case"end":return e.stop()}}),n,null,[[0,9,12,15]])})))).apply(this,arguments)}var E=new IntersectionObserver((function(e,n){return S.apply(this,arguments)}),{root:null,rootMargin:"100px",threshold:1});function S(){return(S=e(s)(e(i).mark((function n(t,a){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),t.forEach((function(e){e.isIntersecting&&L(x,_,k+=1).then((function(e){return p(e)}))}));case 2:case"end":return e.stop()}}),n)})))).apply(this,arguments)}"movies-page"===document.body.id&&L(x,_,k).then((function(e){p(e)})).then((function(){return E.observe(r.targetObserver)})).catch((function(e){return console.log(e)}));s=o("bpxeT"),i=o("2TvXO"),c=o("dIxxU");function O(e,n,t,a){return R.apply(this,arguments)}function R(){return(R=e(s)(e(i).mark((function n(t,a,o,s){var l,p;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get("".concat(a,"?api_key=").concat(t,"&query=").concat(o));case 3:l=e.sent,console.log(l),(p=l.data.results)&&(r.moviesList.innerHTML=""),s(p),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error fetching trending movies:",e.t0.message);case 13:case"end":return e.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}l=o("4s6iC");function q(e){var n=e.map((function(e){var n=e.id,t=e.genre_ids,a=e.original_title,o=e.overview,r=e.release_date,s=e.vote_average,i=e.vote_count,c=e.poster_path,p=function(e){return e.map((function(e){var n=l.genres.find((function(n){return n.id===e}));return n?n.name:""})).filter(Boolean).join(", ")}(t);return'<li class="movies-item" data-id='.concat(n,'>\n            <img src="').concat("https://image.tmdb.org/t/p/w500").concat(c,'" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">').concat(a,'</h2>\n            <p class="movie-description">').concat(o,'</p>\n              <p class="movie-genres">Genres: ').concat(p||"Sorry, no genres available",'</p>\n                <p class="movie-genres">Release date: ').concat(r,'</p>\n            <span class="movie-rate">Rating: ').concat(s.toFixed(2),'</span> \n                 <span class="movie-rate-count">Total votes: ').concat(i,"</span> \n          </div>     \n          </li>")})).join("");r.moviesList.insertAdjacentHTML("beforeend",n)}o("6vEAI"),o("9DEnF"),o("iSh4A"),o("4XNrr"),o("dXD97"),o("76fvS"),o("e3qRy"),o("iR07C"),o("9ejuF"),o("aCpOZ"),o("iKlHq"),o("6W5Ul");(null==r?void 0:r.form)&&r.form.addEventListener("submit",(function(e){e.preventDefault();var n=r.form.searchQuery.value.trim();n?(!0,O("86bcaf318e232372b2e8e2623c959f88","https://api.themoviedb.org/3/search/movie",n,q)):!1}))}();
//# sourceMappingURL=index.c9842283.js.map
