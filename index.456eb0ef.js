var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in s){var o=s[e];delete s[e];var t={id:e,exports:{}};return n[e]=t,o.call(t.exports,t,t.exports),t.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){s[e]=n},e.parcelRequired7c6=o);const t={form:document.querySelector(".search-form"),moviesContainer:document.querySelector(".data-container"),moviesList:document.querySelector(".movies-list"),targetObserver:document.querySelector(".js-guard"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),closeBtn:document.querySelector(".modal-close-btn")};o("aNcKc"),o("k0oAw"),o("8G1wF");var a=o("2shzp"),i=o("8G1wF");function r(e){const n=e.map((({id:e,genre_ids:n,original_title:s,overview:o,vote_average:t,poster_path:a})=>{const r=function(e){return e.map((e=>{const n=i.genres.find((n=>n.id===e));return n?n.name:""})).filter(Boolean).join(", ")}(n);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${a}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${s}</h2>\n            <p class="movie-description">${o}</p>\n            <p class="movie-genres">Genres: ${r||"Sorry, no genres available"}</p>\n            <span class="movie-rate">Rating: ${t.toFixed(2)}</span> \n          </div>\n     \n          </li>`})).join("");t.moviesList.insertAdjacentHTML("beforeend",n)}a=o("2shzp"),i=o("8G1wF");async function l(e){const{id:n,budget:s,genres:o,origin_country:a,title:i,original_title:r,release_date:l,revenue:c,runtime:p,spoken_languages:m,vote_average:v,vote_count:g,overview:u,poster_path:f}=e;let b=`<div class="movie-item-detailed" id=${n}>\n        <img src="https://image.tmdb.org/t/p/w500${f}" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">${i}</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ${r}</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ${o.map((e=>e.name)).join(", ")}</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ${a}</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ${l}</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ${u}</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ${m.map((e=>e.english_name)).join(", ")}</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $${(s/1e6).toFixed()} mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $${(c/1e6).toFixed()} mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ${p} minutes</p>\n        <span class="rating"><span class="modal-bold">Rating:</span> ${v}</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ${g}</span>\n      </div>`;t.backdrop.classList.remove("is-hidden"),t.modalWrapper.innerHTML=b,window.addEventListener("keydown",d)}function c(){t.modalWrapper.innerHTML="",t.backdrop.classList.toggle("is-hidden"),window.removeEventListener("keydown",d)}function d(e){"Escape"===e.code&&c()}(null==t?void 0:t.closeBtn)&&t.closeBtn.addEventListener("click",c);function p(e){e.currentTarget===e.target&&(t.modalWrapper.innerHTML="",t.backdrop.classList.toggle("is-hidden"),window.removeEventListener("keydown",onEscKeyPress))}(null==t?void 0:t.moviesContainer)&&t.moviesContainer.addEventListener("click",(async function(e){e.preventDefault();const n=e.target.closest(".movies-item");if(n){const e=n.getAttribute("data-id");l(await async function(e,n,s){try{isLoading=!0;const o=await a.default.get(`${n}/${s}?api_key=${e}`);return console.log(o),o.data}catch(e){console.log("Error fetching a movie:",e.message)}finally{isLoading=!1}}("86bcaf318e232372b2e8e2623c959f88",i.URLS.SINGLE_MOVIE_URL,e)),t.backdrop.addEventListener("click",p)}}));let m=1,v=!1;async function g(e,n,s){try{v=!0;const o=await a.default.get(`${n}?api_key=${e}&page=${s}`);return o.data.results}catch(e){console.log("Error fetching trending movies:",e.message)}finally{v=!1}}let u=new IntersectionObserver((async function(e,n){console.log(e),e.forEach((e=>{e.isIntersecting&&(m+=1,g("86bcaf318e232372b2e8e2623c959f88","https://api.themoviedb.org/3/trending/movie/week",m).then((e=>r(e))))}))}),{root:null,rootMargin:"100px",threshold:1});"movies-page"===document.body.id&&g("86bcaf318e232372b2e8e2623c959f88","https://api.themoviedb.org/3/trending/movie/week",m).then((e=>{r(e)})).then((()=>u.observe(t.targetObserver))).catch((e=>console.log(e)));a=o("2shzp");async function f(e,n,s,o){try{const i=await a.default.get(`${n}?api_key=${e}&query=${s}`);console.log(i);const r=i.data.results;r&&(t.moviesList.innerHTML=""),o(r)}catch(e){console.log("Error fetching trending movies:",e.message)}}i=o("8G1wF");function b(e){const n=e.map((({id:e,genre_ids:n,original_title:s,overview:o,release_date:t,vote_average:a,vote_count:r,poster_path:l})=>{const c=function(e){return e.map((e=>{const n=i.genres.find((n=>n.id===e));return n?n.name:""})).filter(Boolean).join(", ")}(n);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${l}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${s}</h2>\n            <p class="movie-description">${o}</p>\n              <p class="movie-genres">Genres: ${c||"Sorry, no genres available"}</p>\n                <p class="movie-genres">Release date: ${t}</p>\n            <span class="movie-rate">Rating: ${a.toFixed(2)}</span> \n                 <span class="movie-rate-count">Total votes: ${r}</span> \n          </div>     \n          </li>`})).join("");t.moviesList.insertAdjacentHTML("beforeend",n)}o("gw4ii"),o("gvMD9"),o("ch2Ak"),o("4bPF1"),o("4e31V"),o("60bzg"),o("4r0c0"),o("48xzL"),o("jiT4K"),o("4WBqU"),o("i4GBV"),o("zRueC");let h=!1;(null==t?void 0:t.form)&&t.form.addEventListener("submit",(e=>{e.preventDefault();const n=t.form.searchQuery.value.trim();n?(h=!0,f("86bcaf318e232372b2e8e2623c959f88","https://api.themoviedb.org/3/search/movie",n,b)):h=!1}));
//# sourceMappingURL=index.456eb0ef.js.map
