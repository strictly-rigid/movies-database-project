var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},s=e.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in t){var s=t[e];delete t[e];var a={id:e,exports:{}};return n[e]=a,s.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){t[e]=n},e.parcelRequired7c6=s);const a={form:document.querySelector(".search-form"),moviesContainer:document.querySelector(".data-container"),moviesList:document.querySelector(".movies-list"),targetObserverMovies:document.querySelector(".js-guard-movies"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-movies"),closeBtn:document.querySelector(".modal-close-btn")};var o=s("2shzp");const i={BASE_MOVIES_URL:"https://api.themoviedb.org/3/trending/movie/week",BASE_SERIES_URL:"https://api.themoviedb.org/3/trending/tv/week",BASE_PEOPLE_URL:"https://api.themoviedb.org/3/trending/person/week",SEARCH_MOVIE_URL:"https://api.themoviedb.org/3/search/movie",SEARCH_SERIES_URL:"https://api.themoviedb.org/3/search/tv",SINGLE_MOVIE_URL:"https://api.themoviedb.org/3/movie",SINGLE_SERIES_URL:"https://api.themoviedb.org/3/tv",SEARCH_PERSON_URL:"https://api.themoviedb.org/3/search/person",SINGLE_PERSON_URL:"https://api.themoviedb.org/3/person"},r=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function l(e){const n=e.map((({id:e,genre_ids:n,original_title:t,overview:s,vote_average:a,poster_path:o})=>{const i=function(e){return e.map((e=>{const n=r.find((n=>n.id===e));return n?n.name:""})).filter(Boolean).join(", ")}(n);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${o}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${t}</h2>\n            <p class="movie-description">${s}</p>\n            <p class="movie-genres">Genres: ${i||"Sorry, no genres available"}</p>\n            <span class="movie-rate">Rating: ${a.toFixed(2)}</span> \n          </div>\n     \n          </li>`})).join("");a.moviesList.insertAdjacentHTML("beforeend",n)}function c(e){const n=e.map((({id:e,genre_ids:n,original_title:t,overview:s,release_date:a,vote_average:o,vote_count:i,poster_path:l})=>{const c=function(e){return e.map((e=>{const n=r.find((n=>n.id===e));return n?n.name:""})).filter(Boolean).join(", ")}(n);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${l}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${t}</h2>\n            <p class="movie-description">${s}</p>\n              <p class="movie-genres">Genres: ${c||"Sorry, no genres available"}</p>\n                <p class="movie-genres">Release date: ${a}</p>\n            <span class="movie-rate">Rating: ${o.toFixed(2)}</span> \n                 <span class="movie-rate-count">Total votes: ${i}</span> \n          </div>     \n          </li>`})).join("");a.moviesList.insertAdjacentHTML("beforeend",n)}o=s("2shzp");async function d(e,n,t,s){try{return await o.default.get(`${n}?api_key=${e}&query=${t}&page=${s}`)}catch(e){console.log("Error fetching trending movies:",e.message)}}o=s("2shzp");let m=!1;async function p(e,n,t){try{m=!0;const s=await o.default.get(`${n}/${t}?api_key=${e}`);console.log(s);return s.data}catch(e){console.log("Error fetching a movie:",e.message)}finally{m=!1}}async function v(e){const{id:n,budget:t,genres:s,origin_country:o,title:i,original_title:r,release_date:l,revenue:c,runtime:d,spoken_languages:m,vote_average:p,vote_count:v,overview:h,poster_path:b}=e;let _=`<div class="movie-item-detailed" id=${n}>\n        <img src="https://image.tmdb.org/t/p/w500${b}" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">${i}</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ${r}</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ${s.map((e=>e.name)).join(", ")}</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ${o}</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ${l}</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ${h}</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ${m.map((e=>e.english_name)).join(", ")}</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $${(t/1e6).toFixed()} mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $${(c/1e6).toFixed()} mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ${d} minutes</p>\n        <span class="rating"><span class="modal-bold">Rating:</span> ${p}</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ${v}</span>\n      </div>`;a.backdrop.classList.remove("is-hidden"),a.modalWrapper.innerHTML=_,a.backdrop.addEventListener("click",f),window.addEventListener("keydown",g),a.closeBtn.addEventListener("click",u)}function u(){a.modalWrapper.innerHTML="",a.backdrop.classList.add("is-hidden"),a.backdrop.removeEventListener("click",u),a.closeBtn.removeEventListener("click",u),window.removeEventListener("keydown",g)}function g(e){"Escape"===e.code&&u()}function f(e){e.currentTarget===e.target&&u()}var h=s("kj8Rd");let b="",_=1,y=1;async function E(e,n,t){try{isLoading=!0;const s=await o.default.get(`${n}?api_key=${e}&page=${t}`);s.data.total_pages===y&&((0,h.notifyEndResults)(),L.unobserve(a.targetObserverMovies));return s.data.results}catch(e){console.log("Error fetching trending movies:",e.message)}finally{isLoading=!1}}let L=new IntersectionObserver((function(e,n){console.log(e),e.forEach((e=>{e.isIntersecting&&(_+=1,E("86bcaf318e232372b2e8e2623c959f88",i.BASE_MOVIES_URL,_).then((e=>l(e))))}))}),{root:null,rootMargin:"400px",threshold:1});E("86bcaf318e232372b2e8e2623c959f88",i.BASE_MOVIES_URL,_).then((e=>l(e))).then((()=>L.observe(a.targetObserverMovies))).catch((e=>console.log(e))),a.form.addEventListener("submit",(async function(e){e.preventDefault(),L.unobserve(a.targetObserverMovies),S.unobserve(a.targetObserverSearch),a.backdrop.classList.add("is-hidden"),b=a.form.searchQuery.value.trim(),y=1;try{a.moviesList.innerHTML="",a.endResultsInfo.classList.add("visually-hidden");const e=await d("86bcaf318e232372b2e8e2623c959f88",i.SEARCH_MOVIE_URL,b,y),{results:n,total_results:t}=e.data;n&&n.length>0?(c(n),S.observe(a.targetObserverSearch)):(a.endResultsInfo.classList.remove("visually-hidden"),(0,h.notifyNoResults)()),t&&t<=20&&e.data.total_pages===y&&((0,h.notifyEndResults)(),S.unobserve(a.targetObserverSearch))}catch(e){console.log("Error fetching movies:",e.message)}finally{a.form.searchQuery.value=""}}));let S=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(y+=1,d("86bcaf318e232372b2e8e2623c959f88",i.SEARCH_MOVIE_URL,b,y).then((e=>{const{results:n}=e.data;c(n)})))}))}),{root:null,rootMargin:"400px",threshold:1});a.moviesContainer.addEventListener("click",(async function(e){e.preventDefault();const n=e.target.closest(".movies-item");if(n){const e=n.getAttribute("data-id");v(await p("86bcaf318e232372b2e8e2623c959f88",i.SINGLE_MOVIE_URL,e))}}));
//# sourceMappingURL=index.cb4a1f9f.js.map
