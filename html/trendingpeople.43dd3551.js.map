{"mappings":"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","sources":["src/js/refs3.js","src/js/TrendingPeople/renderTrendingPeople.js","src/js/TrendingPeople/renderFoundPerson.js","src/js/TrendingPeople/searchPerson.js","src/js/TrendingPeople/fetchSinglePerson.js","src/js/helpers/createPersonModalMarkup.js","src/js/TrendingPeople/fetchTrendingPeople.js"],"sourcesContent":["export const refs3 = {\n  form: document.querySelector('.search-form-people'),\n  peopleContainer: document.querySelector('.people-data-container'),\n  peopleList: document.querySelector('.people-list'),\n  targetObserverPeople: document.querySelector('.js-guard-people'),\n  targetObserverSearch: document.querySelector('.js-guard-search'),\n  backdrop: document.querySelector('.person-backdrop'),\n  modalWrapper: document.querySelector('.person-item-wrapper'),\n  endResultsInfo: document.querySelector('.no-results-info-people'),\n  closeBtn: document.querySelector('.modal-people-close-icon'),\n};\n","import { refs3 } from '../refs3';\nimport { URLS, genders } from '../constants';\n\nexport function renderTrendingPeople(people) {\n  const trendingPeople = people\n    .map(({ id, name, gender, known_for_department, profile_path }) => {\n      const imageSrc = profile_path\n        ? `${URLS.POSTER_URL}${profile_path}`\n        : URLS.DEFAULT_IMAGE;\n\n      const personGender = genders[gender] || 'Not specified';\n\n      return `<li class=\"person-item\" data-id=${id}>\n            <img\n              src=\"${imageSrc}\"\n              class=\"person-image\"\n              alt=\"person image\"\n            />\n          <div class=\"person-info\">\n            <h2 class=\"person-name\">${name}</h2>\n            <p class=\"person-gender\">${personGender}</p>\n            <p class=\"popular-movies\">Known for: ${\n              known_for_department || 'No data'\n            } </p>\n          </div>\n          </li>`;\n    })\n    .join('');\n\n  refs3.peopleList.insertAdjacentHTML('beforeend', trendingPeople);\n}\n","import { refs3 } from '../refs3';\nimport { URLS, genders } from '../constants';\n\nexport function renderFoundPerson(foundPerson) {\n  const foundItems = foundPerson\n    .map(({ id, name, gender, profile_path }) => {\n      const imageSrc = profile_path\n        ? `${URLS.POSTER_URL}${profile_path}`\n        : URLS.DEFAULT_IMAGE;\n\n      const personGender = genders[gender] || 'Not specified';\n\n      return `<li class=\"person-item\" data-id=${id}>\n            <img\n              src=\"${imageSrc}\"\n              class=\"person-image\"\n              alt=\"person image\"\n            />\n            <h2 class=\"person-name\">${name}</h2>\n            <p class=\"person-gender\">Gender: ${personGender}</p>\n          \n          </li>`;\n    })\n    .join('');\n\n  refs3.peopleList.insertAdjacentHTML('beforeend', foundItems);\n}\n","import axios from 'axios';\n\nexport async function searchPerson(key, url, searchQuery, page) {\n  try {\n    const response = await axios.get(\n      `${url}?api_key=${key}&query=${searchQuery}&page=${page}`\n    );\n\n    console.log(response);\n\n    return response;\n  } catch (error) {\n    console.log('Error fetching person:', error.message);\n  }\n}\n","import axios from 'axios';\n\nlet isLoading = false;\n\nexport async function fetchSinglePerson(key, url, id) {\n  try {\n    isLoading = true;\n    const response = await axios.get(`${url}/${id}?api_key=${key}`);\n    const personDetails = response.data;\n\n    return personDetails;\n  } catch (error) {\n    console.log('Error fetching person\"s data:', error.message);\n  } finally {\n    isLoading = false;\n  }\n}\n","import { refs3 } from '../refs3';\nimport { URLS, genders } from '../constants';\nimport { onBackdropClick, onEscKeyPress } from './onCloseFunctions';\n\nimport { notifyAddSuccess, notifyIsInFavorites } from './notifyWarnings';\n\nconst favoritePeopleList =\n  JSON.parse(localStorage.getItem('favorite_people')) ?? [];\n\nexport async function createPersonModalMarkup(data) {\n  const {\n    id,\n    birthday,\n    biography,\n    place_of_birth,\n    gender,\n    name,\n    known_for_department,\n    profile_path,\n    popularity,\n  } = data;\n\n  const personImg = profile_path\n    ? `${URLS.POSTER_URL}${profile_path}`\n    : URLS.DEFAULT_IMAGE;\n  const personGender = genders[gender] || 'Not specified';\n\n  let markup = `<div class=\"person-item-detailed\" id=${id}>\n           <img src=\"${personImg}\" class=\"person-image\" alt=\"person image\">\n            <h2 class=\"modal-name modal-title\">${name}</h2>\n            <p class=\"gender\"> <span class=\"modal-bold\"> Gender:</span> ${personGender}</p>\n            <p class=\"birthday\"> <span class=\"modal-bold\"> Born:</span> ${\n              birthday || 'unknown'\n            }</p>\n            <p class=\"place_of_birth\"> <span class=\"modal-bold\"> Place of birth:</span> ${\n              place_of_birth || 'unknown'\n            }</span>\n            <p class=\"known_for\"> <span class=\"modal-bold\"> Known for:</span> ${\n              known_for_department || 'No data'\n            }</p>\n            <p class=\"biography\"> <span class=\"modal-bold\">Bio:</span> ${\n              biography || 'no info'\n            }</p>\n            <p class=\"popularity\"> <span class=\"modal-bold\"> Popularity:</span> ${popularity}</p>\n            <button type=\"button\" class=\"person-fav\">Add to favorites</button>\n          </div>`;\n\n  refs3.backdrop.classList.remove('is-hidden');\n  refs3.modalWrapper.innerHTML = markup;\n\n  refs3.backdrop.addEventListener('click', event =>\n    onBackdropClick(event, onModalClose)\n  );\n  window.addEventListener('keydown', event =>\n    onEscKeyPress(event, onModalClose)\n  );\n  refs3.closeBtn.addEventListener('click', onModalClose);\n\n  /* ======================  ADD TO FAVORITES ======================  */\n  const addFavBtn = document.querySelector('.person-fav');\n  addFavBtn.addEventListener('click', () => addToFavorites(data));\n}\n\nfunction onModalClose() {\n  refs3.modalWrapper.innerHTML = '';\n\n  refs3.backdrop.classList.add('is-hidden');\n\n  refs3.backdrop.removeEventListener('click', onModalClose);\n  refs3.closeBtn.removeEventListener('click', onModalClose);\n  window.removeEventListener('keydown', onEscKeyPress);\n}\n\nfunction addToFavorites(person) {\n  const inStorage = favoritePeopleList.some(fav => fav.id === person.id);\n  const personItem = {\n    id: person.id,\n    name: person.name,\n    gender: person.gender,\n    birthday: person.birthday,\n    biography: person.biography,\n    knownFor: person.known_for_department,\n    placeOfBirth: person.place_of_birth,\n    profile_path: person.profile_path,\n    popularity: person.popularity,\n  };\n\n  if (!inStorage) {\n    favoritePeopleList.push(personItem);\n    localStorage.setItem('favorite_people', JSON.stringify(favoritePeopleList));\n    notifyAddSuccess(person.name);\n  } else {\n    notifyIsInFavorites(person.name);\n  }\n}\n","import { refs3 } from '../refs3';\nimport {\n  URLS,\n  trendingObserverOptions,\n  searchObserverOptions,\n} from '../constants';\nimport { renderTrendingPeople } from './renderTrendingPeople';\nimport { renderFoundPerson } from './renderFoundPerson';\nimport { searchPerson } from './searchPerson';\nimport { fetchSinglePerson } from './fetchSinglePerson';\nimport { createPersonModalMarkup } from '../helpers/createPersonModalMarkup';\nimport { notifyEndResults, notifyNoResults } from '../helpers/notifyWarnings';\nimport { fetchData } from '../helpers/fetchers';\nimport { setNewObserver } from '../helpers/setNewObserver';\n\nconst API_KEY = process.env.API_KEY;\nlet query = '';\nlet currentPage = 1;\nlet currentSearchPage = 1;\n\n/* ====================== TRENDING ======================  */\n\nasync function fetchTrendingPeople(currentPage) {\n  try {\n    const response = await fetchData(URLS.BASE_PEOPLE_URL, {\n      api_key: API_KEY,\n      page: currentPage,\n    });\n\n    if (response.total_pages === currentSearchPage) {\n      notifyEndResults();\n      trendingObserver.unobserve(refs3.targetObserverPeople);\n    }\n    const dataPeople = response.results;\n    return dataPeople;\n  } catch (error) {\n    console.log('Error fetching trending people:', error.message);\n  } finally {\n    isLoading = false;\n  }\n}\n\nconst trendingObserver = setNewObserver(\n  onLoadMoreTrending,\n  trendingObserverOptions\n);\n\nfunction onLoadMoreTrending(entries) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      currentPage += 1;\n      fetchTrendingPeople(currentPage).then(data => renderTrendingPeople(data));\n    }\n  });\n}\n\n// Initializing fetch request for trending\n\nfetchTrendingPeople(currentPage)\n  .then(data => renderTrendingPeople(data))\n  .then(() => trendingObserver.observe(refs3.targetObserverPeople))\n  .catch(err => console.log(err));\n\n/* ====================== SEARCH ======================  */\n\nrefs3.form.addEventListener('submit', searchByName);\n\nasync function searchByName(e) {\n  e.preventDefault();\n\n  refs3.backdrop.classList.add('is-hidden');\n  query = refs3.form.searchQuery.value.trim();\n\n  resetState();\n\n  try {\n    const personData = await searchPerson(\n      API_KEY,\n      URLS.SEARCH_PERSON_URL,\n      query,\n      currentSearchPage\n    );\n\n    const { results, total_results } = personData.data;\n\n    if (results && results.length > 0) {\n      renderFoundPerson(results);\n      searchObserver.observe(refs3.targetObserverSearch);\n    } else {\n      refs3.endResultsInfo.classList.remove('visually-hidden');\n      notifyNoResults();\n    }\n\n    if (\n      total_results &&\n      total_results <= 20 &&\n      personData.data.total_pages === currentSearchPage\n    ) {\n      notifyEndResults();\n      searchObserver.unobserve(refs3.targetObserverSearch);\n    }\n  } catch (error) {\n    console.log('Error fetching person:', error.message);\n  } finally {\n    refs3.form.searchQuery.value = '';\n  }\n}\n\nfunction resetState() {\n  trendingObserver.unobserve(refs3.targetObserverPeople);\n  searchObserver.unobserve(refs3.targetObserverSearch);\n\n  refs3.peopleList.innerHTML = '';\n  refs3.endResultsInfo.classList.add('visually-hidden');\n\n  currentSearchPage = 1;\n}\n\nconst searchObserver = setNewObserver(onLoadMoreSearch, searchObserverOptions);\n\nfunction onLoadMoreSearch(entries) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      currentSearchPage += 1;\n      searchPerson(\n        API_KEY,\n        URLS.SEARCH_PERSON_URL,\n        query,\n        currentSearchPage\n      ).then(dataFound => {\n        const { results } = dataFound.data;\n        renderFoundPerson(results);\n      });\n    }\n  });\n}\n\n/* ====================== PERSON'S DETAILS ======================  */\n\nrefs3.peopleContainer.addEventListener('click', onPersonItemClick);\n\nasync function onPersonItemClick(e) {\n  e.preventDefault();\n\n  const targetElement = e.target.closest('.person-item');\n  if (targetElement) {\n    const dataId = targetElement.getAttribute('data-id');\n    const data = await fetchSinglePerson(\n      API_KEY,\n      URLS.SINGLE_PERSON_URL,\n      dataId\n    );\n    createPersonModalMarkup(data);\n  }\n}\n"],"names":["$e906e16ee62abe85$export$1667d6aa2cee11d8","form","document","querySelector","peopleContainer","peopleList","targetObserverPeople","targetObserverSearch","backdrop","modalWrapper","endResultsInfo","closeBtn","$45ebb74e1e41cb42$export$1f3529df0466b8e9","people","trendingPeople","map","id","name","gender","known_for_department","profile_path","$8G1wF","URLS","POSTER_URL","DEFAULT_IMAGE","genders","join","insertAdjacentHTML","$3031f43cc7f53ebe$export$706c7750293f7a13","foundPerson","foundItems","$2shzp","parcelRequire","async","$33a9d54fb0f6f81e$export$791a87ce43433885","key","url","searchQuery","page","response","default","get","console","log","error","message","$d289a749cf5d8107$var$isLoading","$d289a749cf5d8107$export$bda05f064222d25a","data","$06bcc255bee61c4e$var$ref","$06bcc255bee61c4e$var$favoritePeopleList","JSON","parse","localStorage","getItem","$06bcc255bee61c4e$export$9a7ad2d283fab89","birthday","biography","place_of_birth","popularity","markup","classList","remove","innerHTML","addEventListener","event","$6Ipdt","onBackdropClick","$06bcc255bee61c4e$var$onModalClose","window","onEscKeyPress","person","inStorage","some","fav","personItem","knownFor","placeOfBirth","$kj8Rd","notifyIsInFavorites","push","setItem","stringify","notifyAddSuccess","$06bcc255bee61c4e$var$addToFavorites","add","removeEventListener","$313ad1f2210997b7$var$query","$313ad1f2210997b7$var$currentPage","$313ad1f2210997b7$var$currentSearchPage","$313ad1f2210997b7$var$fetchTrendingPeople","currentPage1","$dB5GG","fetchData","BASE_PEOPLE_URL","api_key","undefined","total_pages","notifyEndResults","$313ad1f2210997b7$var$trendingObserver","unobserve","results","isLoading","$hlWSz","setNewObserver","entries","forEach","entry","isIntersecting","then","trendingObserverOptions","observe","catch","err","e","preventDefault","value","trim","$313ad1f2210997b7$var$searchObserver","personData","SEARCH_PERSON_URL","total_results","length","notifyNoResults","dataFound","searchObserverOptions","targetElement","target","closest","dataId","getAttribute","SINGLE_PERSON_URL"],"version":3,"file":"trendingpeople.43dd3551.js.map"}