var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in n){var r=n[e];delete n[e];var t={id:e,exports:{}};return s[e]=t,r.call(t.exports,t,t.exports),t.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,s){n[e]=s},e.parcelRequired7c6=r);var t=r("2shzp");const a={form:document.querySelector(".search-form-series"),seriesContainer:document.querySelector(".series-data-container"),seriesList:document.querySelector(".series-list"),targetObserverSeries:document.querySelector(".js-guard-series"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".series-backdrop"),modalWrapper:document.querySelector(".series-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-series"),closeBtn:document.querySelector(".modal-close-btn")};var o=r("8G1wF");o=r("8G1wF");function i(e,s){return e.map((e=>{const n=s.find((s=>s.id===e));return n?n.name:""})).filter(Boolean).join(", ")}function c(e){console.log(e);const s=e.map((({id:e,name:s,overview:n,vote_average:r,poster_path:t,first_air_date:a,genre_ids:c})=>{const l=i(c,o.genres);return`<li class="series-item" data-id=${e}>\n            <img src="${o.URLS.POSTER_URL}${t}" class="series-poster" alt="series poster">\n            <div class="series-info">\n            <h2 class="series-title">${s}</h2>\n            <p class="series-description">${n}</p>\n            <p class="series-genres">Genres: ${l||"No data"}</p>\n            <p class="series-premiere">Premiere date: ${a}</p>\n            <span class="series-rate">Rating: ${r.toFixed(2)}</span>\n            </div>\n          </li>`})).join("");a.seriesList.insertAdjacentHTML("beforeend",s)}o=r("8G1wF");function l(e){const s=e.map((({id:e,genre_ids:s,name:n,overview:r,first_air_date:t,vote_average:a,vote_count:c,poster_path:l})=>{const d=i(s,o.genres);return`<li class="series-item" data-id=${e}>\n            <img src="${o.URLS.POSTER_URL}${l}" class="series-poster" alt="series poster">\n            <div class="series-info">\n            <h2 class="series-title">${n}</h2>\n            <p class="series-description">${r}</p>\n              <p class="series-genres">Genres: ${d||"No data"}</p>\n                <p class="series-premiere">Premiere date: ${t}</p>\n                 <span class="series-rate">Rating: ${a.toFixed(2)}</span> \n                 <span class="series-rate-count">Total votes: ${c}</span> \n          </div>     \n          </li>`})).join("");a.seriesList.insertAdjacentHTML("beforeend",s)}t=r("2shzp");async function d(e,s,n,r){try{const a=await t.default.get(`${s}?api_key=${e}&query=${n}&page=${r}`);return console.log(a),a}catch(e){console.log("Error fetching trending series:",e.message)}}t=r("2shzp");let p=!1;async function u(e,s,n){try{p=!0;const r=await t.default.get(`${s}/${n}?api_key=${e}`);console.log(r);return r.data}catch(e){console.log("Error fetching series:",e.message)}finally{p=!1}}o=r("8G1wF");var f,g=r("6Ipdt"),v=r("kj8Rd");let m=null!==(f=JSON.parse(localStorage.getItem("favorite_series")))&&void 0!==f?f:[];async function b(e){const{id:s,created_by:n,in_production:r,languages:t,genres:i,origin_country:c,name:l,first_air_date:d,number_of_seasons:p,number_of_episodes:u,vote_average:f,vote_count:b,overview:y,poster_path:S}=e,h=i.map((e=>e.name)).join(", "),$=t.map((e=>e)).join(", "),L=n.map((e=>e.name)).join(", ");let E=`<div class="series-item-detailed" id=${s}>\n       <img src="${o.URLS.POSTER_URL}${S}" class="series-poster" alt="series poster">\n        <h2 class="modal-title">${l}</h2>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ${h}</p>\n       \n        <p class="orig-country"><span class="modal-bold">Origin country:</span> ${c}</p>\n        <p class="in-production"><span class="modal-bold">Still in production:</span> ${r}</p>\n      \n\n     \n        <p class="first-air-date"><span class="modal-bold">First air date:</span> ${d}</p>\n        <p class="modal-series-description"><span class="modal-bold">Desription:</span> ${y}</p>\n      \n        <p class="created-by"><span class="modal-bold">Creators:</span> ${L}</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ${$}</p>\n        <div class="series-length">\n        <span class="seasons"><span class="modal-bold">Number of seasons:</span> ${p}</span>\n        <span class="episodes"><span class="modal-bold">Number of episodes:</span> ${u}</span>\n        </div>\n\n        <div class="series-modal-rate">\n         <span class="rating"><span class="modal-bold">Rating:</span> ${f}</span>\n         <span class="vote-count"><span class="modal-bold">Total votes:</span> ${b}</span>\n         </div>\n\n         <button type="button" class="series-fav">Add to favorites</button>\n   \n      </div>`;a.backdrop.classList.remove("is-hidden"),a.modalWrapper.innerHTML=E,a.backdrop.addEventListener("click",(e=>(0,g.onBackdropClick)(e,_))),window.addEventListener("keydown",(e=>(0,g.onEscKeyPress)(e,_))),a.closeBtn.addEventListener("click",_);document.querySelector(".series-fav").addEventListener("click",(()=>function(e){const s=m.some((s=>s.id===e.id)),n={id:e.id,name:e.name,createdBy:e.created_by,inProduction:e.in_production,languages:e.languages,genres:e.genres,originCountry:e.origin_country,posterPath:e.poster_path,firstAir:e.first_air_date,numberSeasons:e.number_of_seasons,numberEpisodes:e.number_of_episodes,overview:e.overview,voteAverage:e.vote_average,voteCount:e.vote_count};s?(0,v.notifyIsInFavorites)(e.name):(m.push(n),localStorage.setItem("favorite_series",JSON.stringify(m)),(0,v.notifyAddSuccess)(e.name))}(e)))}function _(){a.modalWrapper.innerHTML="",a.backdrop.classList.add("is-hidden"),a.backdrop.removeEventListener("click",_),a.closeBtn.removeEventListener("click",_),window.removeEventListener("keydown",g.onEscKeyPress)}v=r("kj8Rd");let y="",S=1,h=1,$=!1;async function L(e,s,n){try{$=!0;const r=await t.default.get(`${s}?api_key=${e}&page=${n}`);console.log(r),r.data.total_pages===h&&((0,v.notifyEndResults)(),E.unobserve(a.targetObserverSeries));return r.data.results}catch(e){console.log("Error fetching trending series:",e.message)}finally{$=!1}}let E=new IntersectionObserver((function(e,s){console.log(e),e.forEach((e=>{e.isIntersecting&&(S+=1,L("86bcaf318e232372b2e8e2623c959f88",o.URLS.BASE_SERIES_URL,S).then((e=>c(e))))}))}),o.trendingObserverOptions);L("86bcaf318e232372b2e8e2623c959f88",o.URLS.BASE_SERIES_URL,S).then((e=>c(e))).then((()=>E.observe(a.targetObserverSeries))).catch((e=>console.log(e))),a.form.addEventListener("submit",(async function(e){e.preventDefault(),E.unobserve(a.targetObserverSeries),R.unobserve(a.targetObserverSearch),a.backdrop.classList.add("is-hidden"),y=a.form.searchQuery.value.trim(),h=1;try{a.seriesList.innerHTML="",a.endResultsInfo.classList.add("visually-hidden");const e=await d("86bcaf318e232372b2e8e2623c959f88",o.URLS.SEARCH_SERIES_URL,y,h),{results:s,total_results:n}=e.data;s&&s.length>0?(l(s),R.observe(a.targetObserverSearch)):(a.endResultsInfo.classList.remove("visually-hidden"),(0,v.notifyNoResults)()),n&&n<=20&&e.data.total_pages===h&&((0,v.notifyEndResults)(),R.unobserve(a.targetObserverSearch))}catch(e){console.log("Error fetching series:",e.message)}finally{a.form.searchQuery.value=""}}));let R=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(h+=1,d("86bcaf318e232372b2e8e2623c959f88",o.URLS.SEARCH_SERIES_URL,y,h).then((e=>{const{results:s}=e.data;l(s)})))}))}),o.searchObserverOptions);a.seriesContainer.addEventListener("click",(async function(e){e.preventDefault();const s=e.target.closest(".series-item");if(s){const e=s.getAttribute("data-id");b(await u("86bcaf318e232372b2e8e2623c959f88",o.URLS.SINGLE_SERIES_URL,e))}}));
//# sourceMappingURL=trendingseries.3e67e705.js.map
