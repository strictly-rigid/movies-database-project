var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o);var r=o("2shzp");const a={form:document.querySelector(".search-form-people"),peopleContainer:document.querySelector(".people-data-container"),peopleList:document.querySelector(".people-list"),targetObserverPeople:document.querySelector(".js-guard-people"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".person-backdrop"),modalWrapper:document.querySelector(".person-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-people"),closeBtn:document.querySelector(".modal-people-close-icon")},s={BASE_MOVIES_URL:"https://api.themoviedb.org/3/trending/movie/week",BASE_SERIES_URL:"https://api.themoviedb.org/3/trending/tv/week",BASE_PEOPLE_URL:"https://api.themoviedb.org/3/trending/person/week",SEARCH_MOVIE_URL:"https://api.themoviedb.org/3/search/movie",SEARCH_SERIES_URL:"https://api.themoviedb.org/3/search/tv",SINGLE_MOVIE_URL:"https://api.themoviedb.org/3/movie",SINGLE_SERIES_URL:"https://api.themoviedb.org/3/tv",SEARCH_PERSON_URL:"https://api.themoviedb.org/3/search/person",SINGLE_PERSON_URL:"https://api.themoviedb.org/3/person"},i={0:"Not set / not specified",1:"Female",2:"Male",3:"Non-binary"};function p(e){console.log(e);const t=e.map((({id:e,name:t,gender:n,known_for_department:o,profile_path:r})=>`<li class="person-item" data-id=${e}>\n            <img\n              src="${r?`https://image.tmdb.org/t/p/w500${r}`:"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg"}"\n              class="person-image"\n              alt="person image"\n            />\n          <div class="person-info">\n            <h2 class="person-name">${t}</h2>\n            <p class="person-gender">${i[n]||"Not specified"}</p>\n            <p class="popular-movies">Known for: ${o||"No data"} </p>\n          </div>\n          </li>`)).join("");a.peopleList.insertAdjacentHTML("beforeend",t)}function l(e){const t=e.map((({id:e,known_for_department:t,name:n,gender:o,profile_path:r})=>`<li class="person-item" data-id=${e}>\n            <img\n              src="${r?`https://image.tmdb.org/t/p/w500${r}`:"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg"}"\n              class="person-image"\n              alt="person image"\n            />\n            <h2 class="person-name">${n}</h2>\n            <p class="person-gender">${i[o]||"Not specified"}</p>\n          \n          </li>`)).join("");a.peopleList.insertAdjacentHTML("beforeend",t)}r=o("2shzp");async function c(e,t,n,o){try{const a=await r.default.get(`${t}?api_key=${e}&query=${n}&page=${o}`);return console.log(a),a}catch(e){console.log("Error fetching person:",e.message)}}r=o("2shzp");let d=!1;async function u(e,t,n){try{d=!0;const o=await r.default.get(`${t}/${n}?api_key=${e}`);return o.data}catch(e){console.log('Error fetching person"s data:',e.message)}finally{d=!1}}o("1GAPJ");var f=o("kj8Rd");var g;const m=null!==(g=JSON.parse(localStorage.getItem("favorites")))&&void 0!==g?g:[];async function h(e){const{id:t,birthday:n,biography:o,place_of_birth:r,gender:s,name:p,known_for_department:l,profile_path:c,popularity:d}=e;console.log(e);let u=`<div class="person-item-detailed" id=${t}>\n           <img src="${c?`https://image.tmdb.org/t/p/w500${c}`:"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg"}" class="person-image" alt="person image">\n            <h2 class="modal-name modal-title">${p}</h2>\n            <p class="gender"> <span class="modal-bold"> Gender:</span> ${i[s]||"Not specified"}</p>\n            <p class="birthday"> <span class="modal-bold"> Born:</span> ${n||"unknown"}</p>\n            <p class="place_of_birth"> <span class="modal-bold"> Place of birth:</span> ${r||"unknown"}</span>\n            <p class="known_for"> <span class="modal-bold"> Known for:</span> ${l||"No data"}</p>\n            <p class="biography"> <span class="modal-bold">Bio:</span> ${o||"no info"}</p>\n            <p class="popularity"> <span class="modal-bold"> Popularity:</span> ${d}</p>\n            <button type="button" class="person-fav">Add to favorites</button>\n          </div>`;a.backdrop.classList.remove("is-hidden"),a.modalWrapper.innerHTML=u,a.backdrop.addEventListener("click",_),window.addEventListener("keydown",v),a.closeBtn.addEventListener("click",b);document.querySelector(".person-fav").addEventListener("click",(()=>function(e){const t=m.some((t=>t.id===e.id)),n={id:e.id,name:e.name,gender:e.gender,birthday:e.birthday,biography:e.biography,knownFor:e.known_for_department,place_of_birth:e.place_of_birth,profile_path:e.profile_path,popularity:e.popularity};t?(0,f.notifyIsInFavorites)(e.name):(m.push(n),localStorage.setItem("favorites",JSON.stringify(m)),(0,f.notifyAddSuccess)(e.name))}(e)))}function b(){a.modalWrapper.innerHTML="",a.backdrop.classList.add("is-hidden"),a.backdrop.removeEventListener("click",b),a.closeBtn.removeEventListener("click",b),window.removeEventListener("keydown",v)}function v(e){"Escape"===e.code&&b()}function _(e){e.currentTarget===e.target&&b()}f=o("kj8Rd");let y="",E=1,L=1,S=!1;async function R(e,t,n){try{S=!0;const o=await r.default.get(`${t}?api_key=${e}&page=${n}`);console.log(o),o.data.total_pages===L&&((0,f.notifyEndResults)(),w.unobserve(a.targetObserverPeople));return o.data.results}catch(e){console.log("Error fetching trending people:",e.message)}finally{S=!1}}let w=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(E+=1,R("86bcaf318e232372b2e8e2623c959f88",s.BASE_PEOPLE_URL,E).then((e=>p(e))))}))}),{root:null,rootMargin:"400px",threshold:1});R("86bcaf318e232372b2e8e2623c959f88",s.BASE_PEOPLE_URL,E).then((e=>p(e))).then((()=>w.observe(a.targetObserverPeople))).catch((e=>console.log(e))),a.form.addEventListener("submit",(async function(e){e.preventDefault(),w.unobserve(a.targetObserverPeople),k.unobserve(a.targetObserverSearch),a.backdrop.classList.add("is-hidden"),y=a.form.searchQuery.value.trim(),L=1;try{a.peopleList.innerHTML="",a.endResultsInfo.classList.add("visually-hidden");const e=await c("86bcaf318e232372b2e8e2623c959f88",s.SEARCH_PERSON_URL,y,L),{results:t,total_results:n}=e.data;t&&t.length>0?(l(t),k.observe(a.targetObserverSearch)):(a.endResultsInfo.classList.remove("visually-hidden"),(0,f.notifyNoResults)()),n&&n<=20&&e.data.total_pages===L&&((0,f.notifyEndResults)(),k.unobserve(a.targetObserverSearch))}catch(e){console.log("Error fetching person:",e.message)}finally{a.form.searchQuery.value=""}}));let k=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(L+=1,c("86bcaf318e232372b2e8e2623c959f88",s.SEARCH_PERSON_URL,y,L).then((e=>{const{results:t}=e.data;l(t)})))}))}),{root:null,rootMargin:"400px",threshold:1});a.peopleContainer.addEventListener("click",(async function(e){e.preventDefault();const t=e.target.closest(".person-item");if(t){const e=t.getAttribute("data-id");h(await u("86bcaf318e232372b2e8e2623c959f88",s.SINGLE_PERSON_URL,e))}}));
//# sourceMappingURL=trendingpeople.6a9c2531.js.map
