var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=s);const o={form:document.querySelector(".search-form"),moviesContainer:document.querySelector(".data-container"),moviesList:document.querySelector(".movies-list"),targetObserverMovies:document.querySelector(".js-guard-movies"),targetObserverSearch:document.querySelector(".js-guard-search"),backdrop:document.querySelector(".backdrop"),modalWrapper:document.querySelector(".movie-item-wrapper"),endResultsInfo:document.querySelector(".no-results-info-movies"),closeBtn:document.querySelector(".modal-close-btn")};var a=s("2shzp"),r=s("8G1wF");r=s("8G1wF");function i(e){const t=e.map((({id:e,genre_ids:t,original_title:n,overview:s,vote_average:o,poster_path:a})=>{const i=function(e){return e.map((e=>{const t=r.genres.find((t=>t.id===e));return t?t.name:""})).filter(Boolean).join(", ")}(t);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${a}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${n}</h2>\n            <p class="movie-description">${s}</p>\n            <p class="movie-genres">Genres: ${i||"Sorry, no genres available"}</p>\n            <span class="movie-rate">Rating: ${o.toFixed(2)}</span> \n          </div>\n     \n          </li>`})).join("");o.moviesList.insertAdjacentHTML("beforeend",t)}r=s("8G1wF");function l(e){const t=e.map((({id:e,genre_ids:t,original_title:n,overview:s,release_date:o,vote_average:a,vote_count:i,poster_path:l})=>{const c=function(e){return e.map((e=>{const t=r.genres.find((t=>t.id===e));return t?t.name:""})).filter(Boolean).join(", ")}(t);return`<li class="movies-item" data-id=${e}>\n            <img src="https://image.tmdb.org/t/p/w500${l}" class="movie-poster" alt="movie poster">\n            <div class="movie-info">\n            <h2 class="movie-title">${n}</h2>\n            <p class="movie-description">${s}</p>\n              <p class="movie-genres">Genres: ${c||"Sorry, no genres available"}</p>\n                <p class="movie-genres">Release date: ${o}</p>\n            <span class="movie-rate">Rating: ${a.toFixed(2)}</span> \n                 <span class="movie-rate-count">Total votes: ${i}</span> \n          </div>     \n          </li>`})).join("");o.moviesList.insertAdjacentHTML("beforeend",t)}a=s("2shzp");async function c(e,t,n,s){try{return await a.default.get(`${t}?api_key=${e}&query=${n}&page=${s}`)}catch(e){console.log("Error fetching trending movies:",e.message)}}a=s("2shzp");let d=!1;async function v(e,t,n){try{d=!0;const s=await a.default.get(`${t}/${n}?api_key=${e}`);console.log(s);return s.data}catch(e){console.log("Error fetching a movie:",e.message)}finally{d=!1}}var p=s("kj8Rd");var u;let m=null!==(u=JSON.parse(localStorage.getItem("favorite_movies")))&&void 0!==u?u:[];async function g(e){const{id:t,budget:n,genres:s,origin_country:a,title:r,original_title:i,release_date:l,revenue:c,runtime:d,spoken_languages:v,vote_average:u,vote_count:g,overview:y,poster_path:_}=e;let $=`<div class="movie-item-detailed" id=${t}>\n        <img src="https://image.tmdb.org/t/p/w500${_}" class="movie-poster" alt="movie poster">\n        <h2 class="modal-title">${r}</h2>\n        <h3 class="modal-original-title"><span class="modal-bold">Original title</span>: ${i}</h3>\n        <p class="modal-genres"><span class="modal-bold">Genres:</span> ${s.map((e=>e.name)).join(", ")}</p>\n        <p class="orig-country"><span class="modal-bold">Country of origin:</span> ${a}</p>\n        <p class="modal-release-date"><span class="modal-bold">Release date:</span> ${l}</p>\n        <p class="modal-movie-description"><span class="modal-bold">Desription:</span> ${y}</p>\n        <p class="languages"><span class="modal-bold">Spoken languages:</span> ${v.map((e=>e.english_name)).join(", ")}</p>\n        <span class="budget"><span class="modal-bold">Budget:</span> $${(n/1e6).toFixed()} mln</span>\n        <span class="revenue"><span class="modal-bold">Revenue:</span> $${(c/1e6).toFixed()} mln</span>\n        <p class="runtime"><span class="modal-bold">Time:</span> ${d} minutes</p>\n\n         <div class="movies-modal-rate">\n        <span class="rating"><span class="modal-bold">Rating:</span> ${u}</span>\n        <span class="vote-count"><span class="modal-bold">Total votes:</span> ${g}</span>\n        </div>\n\n        <button type="button" class="movies-fav">Add to favorites</button>\n      </div>`;o.backdrop.classList.remove("is-hidden"),o.modalWrapper.innerHTML=$,o.backdrop.addEventListener("click",h),window.addEventListener("keydown",b),o.closeBtn.addEventListener("click",f);document.querySelector(".movies-fav").addEventListener("click",(()=>function(e){const t=m.some((t=>t.id===e.id)),n={id:e.id,title:e.title,origTitle:e.original_title,budget:e.budget,languages:e.spoken_languages,genres:e.genres,originCountry:e.origin_country,releaseDate:e.release_date,posterPath:e.poster_path,revenue:e.revenue,runtime:e.runtime,overview:e.overview,voteAverage:e.vote_average,voteCount:e.vote_count};t?(0,p.notifyIsInFavorites)(e.title):(m.push(n),localStorage.setItem("favorite_movies",JSON.stringify(m)),(0,p.notifyAddSuccess)(e.title))}(e)))}function f(){o.modalWrapper.innerHTML="",o.backdrop.classList.add("is-hidden"),o.backdrop.removeEventListener("click",f),o.closeBtn.removeEventListener("click",f),window.removeEventListener("keydown",b)}function b(e){"Escape"===e.code&&f()}function h(e){e.currentTarget===e.target&&f()}p=s("kj8Rd");let y="",_=1,$=1;async function L(e,t,n){try{isLoading=!0;const s=await a.default.get(`${t}?api_key=${e}&page=${n}`);s.data.total_pages===$&&((0,p.notifyEndResults)(),S.unobserve(o.targetObserverMovies));return s.data.results}catch(e){console.log("Error fetching trending movies:",e.message)}finally{isLoading=!1}}let S=new IntersectionObserver((function(e,t){console.log(e),e.forEach((e=>{e.isIntersecting&&(_+=1,L("86bcaf318e232372b2e8e2623c959f88",r.URLS.BASE_MOVIES_URL,_).then((e=>i(e))))}))}),{root:null,rootMargin:"400px",threshold:1});L("86bcaf318e232372b2e8e2623c959f88",r.URLS.BASE_MOVIES_URL,_).then((e=>i(e))).then((()=>S.observe(o.targetObserverMovies))).catch((e=>console.log(e))),o.form.addEventListener("submit",(async function(e){e.preventDefault(),S.unobserve(o.targetObserverMovies),w.unobserve(o.targetObserverSearch),o.backdrop.classList.add("is-hidden"),y=o.form.searchQuery.value.trim(),$=1;try{o.moviesList.innerHTML="",o.endResultsInfo.classList.add("visually-hidden");const e=await c("86bcaf318e232372b2e8e2623c959f88",r.URLS.SEARCH_MOVIE_URL,y,$),{results:t,total_results:n}=e.data;t&&t.length>0?(l(t),w.observe(o.targetObserverSearch)):(o.endResultsInfo.classList.remove("visually-hidden"),(0,p.notifyNoResults)()),n&&n<=20&&e.data.total_pages===$&&((0,p.notifyEndResults)(),w.unobserve(o.targetObserverSearch))}catch(e){console.log("Error fetching movies:",e.message)}finally{o.form.searchQuery.value=""}}));let w=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&($+=1,c("86bcaf318e232372b2e8e2623c959f88",r.URLS.SEARCH_MOVIE_URL,y,$).then((e=>{const{results:t}=e.data;l(t)})))}))}),{root:null,rootMargin:"400px",threshold:1});o.moviesContainer.addEventListener("click",(async function(e){e.preventDefault();const t=e.target.closest(".movies-item");if(t){const e=t.getAttribute("data-id");g(await v("86bcaf318e232372b2e8e2623c959f88",r.URLS.SINGLE_MOVIE_URL,e))}}));
//# sourceMappingURL=index.a932a0c7.js.map
